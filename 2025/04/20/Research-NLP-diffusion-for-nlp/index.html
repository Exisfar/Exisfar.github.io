<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Diffusion for NLP | Exisfarの小窝</title><meta name="author" content="Exisfar"><meta name="copyright" content="Exisfar"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Diffusion for NLP"><meta name="application-name" content="Diffusion for NLP"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Diffusion for NLP"><meta property="og:url" content="https://exisfar.github.io/2025/04/20/Research-NLP-diffusion-for-nlp/index.html"><meta property="og:site_name" content="Exisfarの小窝"><meta property="og:description" content="Diffusion for NLP 攻略  Diffusion Forcing: Next-token Prediction Meets Full-Sequence Diffusion 2024年了diffusion还有什么可做的？ - ACER的回答 - 知乎 Diffusion LLM 会不会是"><meta property="og:locale" content="en"><meta property="og:image" content="https://exisfar.github.io/img/nightfall.png"><meta property="article:author" content="Exisfar"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://exisfar.github.io/img/nightfall.png"><meta name="description" content="Diffusion for NLP 攻略  Diffusion Forcing: Next-token Prediction Meets Full-Sequence Diffusion 2024年了diffusion还有什么可做的？ - ACER的回答 - 知乎 Diffusion LLM 会不会是"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://exisfar.github.io/2025/04/20/Research-NLP-diffusion-for-nlp/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":true,"limitCount":50,"languages":{"author":"Author: Exisfar","link":"Link: ","source":"Source: Exisfarの小窝","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Exisfarの小窝',
  title: 'Diffusion for NLP',
  postAI: '',
  pageFillDescription: 'Diffusion for NLP, 攻略, 思路, 1. Diffusion Forcing, 2. ICML 2024 最佳论文, 3. 其他创新方向, 4. 工程实现, 总结, 思路2, 1. 情感控制, 2. 主题一致性, 3. 结合情感与主题一致性, 4. 具体的工作路径, 实验设计, 1. 数据集选择, 2. 模型架构, 3. 目标函数, 4. 优化算法, 5. 实验设计, 是直接将matric作为目标函数训练吗？攻略年了还有什么可做的的回答知乎会不会是未来的文章知乎在方向相关工作追踪持续更新的文章知乎扩散模型在自然语言处理领域相比大语言模型有什么优势的回答知乎思路基于的对话模型确实是一个热门方向但创新确实需要大量工程和理论工作你提到的和的最佳论文提供了新的思路以下是一些可能的方向核心思想通过外部信号引导生成过程提升生成质量创新方向对话中的情感控制利用情感标签作为引导信号生成符合特定情感的回复主题一致性通过主题关键词引导生成确保对话内容的一致性多模态引导结合图像或音频信号生成更丰富的回复最佳论文核心思想论文可能提出了新的理论框架或优化方法提升模型在中的表现创新方向简化理论框架将论文中的理论简化并应用到对话模型中降低计算复杂度结合预训练模型将与等结合提升生成质量动态调整扩散过程根据上下文动态调整扩散参数提升生成灵活性其他创新方向在少量数据上微调模型适应新任务可解释性通过可视化扩散过程提升模型的可解释性实时生成优化优化推理速度实现实时对话生成工程实现模块化设计将扩散过程引导机制等模块化便于实验和优化开源工具使用等工具加速开发分布式训练利用分布式训练加速大规模数据训练总结结合和论文的思路你可以从情感控制主题一致性等方向入手结合模块化设计和开源工具逐步实现创新思路将与情感控制主题一致性等结合可以为对话生成模型带来更高的灵活性和精度通过结合这些技术可以在对话生成的过程中动态地引导模型生成符合预期情感和主题一致性的内容以下是一些可能的创新方向情感控制情感控制通常涉及让对话生成模型能够根据预定的情感目标例如愉快悲伤生气等来调整生成的文本内容通过将引入情感控制你可以情感特征嵌入在输入的文本或上下文中加入情感标记例如情感向量使模型在生成过程中根据该情感进行调整结合模型可以将情感信息在过程的每一个步骤中逐渐融合到模型的潜在空间使得生成的文本逐步渗透情感特征扩展情感空间在生成过程中你可以通过模型在潜在空间中进行采样并且在生成的每一步都向特定的情感目标例如喜怒哀乐的平衡进行逼近这能够让模型在多轮对话中保持一致的情感色彩情感引导的通过将情感信息与每个生成步骤的预测相结合使用模型来细化情感目标确保每个预测的在情感维度上都符合预期这种方法能够让模型在每一步中保持情感的平滑过渡和一致性主题一致性对话的主题一致性非常重要尤其是长时间交互中的对话维度结合模型和主题控制可以在以下方面进行创新主题潜在空间在模型中引入主题向量作为潜在空间的一部分这样模型可以在生成过程中逐步引导每个生成步骤朝着特定的主题方向发展例如模型可以从随机噪声开始逐步生成具有主题一致性的对话主题一致性损失函数为确保对话的主题一致性可以设计一个损失函数评估对话中每一步的主题一致性通过模型可以在每个生成步骤上对主题一致性进行微调例如可以在模型的潜在空间中引入主题特征并通过过程让这些特征逐渐展现出来确保生成的对话在每一轮对话中都能保持主题连贯动态主题分配结合主题建模如等与模型在每一轮对话生成时动态地根据当前对话状态进行主题分配通过过程来平滑和引导主题变化使得每轮对话生成过程中主题逐渐转变但不失去对话的一致性结合情感与主题一致性情感和主题一致性通常是交织在一起的例如在进行客户支持对话时情感和主题应保持一致通过结合这两者可以进行以下创新多任务学习设计一个多任务学习框架其中一个任务负责情感控制另一个任务负责主题一致性通过模型的每个步骤你可以根据情感目标和主题目标分别对潜在空间进行调控确保每个的生成都能同时满足这两个目标情感主题关联映射通过建模情感和主题之间的相互关系可以使模型在进行对话生成时在潜在空间中同时融合情感和主题信息这样不仅可以在每一步生成过程中控制情感的变化还能保证对话的主题在情感变化过程中不失去一致性情感主题混合空间在潜在空间中设计情感主题混合的表示使得每个生成步骤都考虑到情感和主题的共同影响例如可以在过程中将情感标签与主题标签结合使得每个生成的既符合当前情感的调性也符合对话主题的一致性具体的工作路径训练阶段你可以通过自监督学习的方式在对话数据中标注情感和主题标签并利用这些标签在过程中引导生成模型通过引导潜在空间的演化使得情感和主题信息在生成过程中逐步融入多模态信息引导结合情感分析和主题建模的输出作为多模态信息例如文本中的情感分类和主题标签用作模型的输入引导模型生成符合要求的对话反馈机制在实际应用中可以通过建立反馈机制让生成的对话逐步进行调整通过对话的情感和主题表现进行评分并将这些评分作为奖励信号帮助模型优化生成策略进一步提升情感一致性和主题连贯性通过结合情感控制和主题一致性你可以创建一个更智能情感更丰富主题连贯的对话系统提供更高质量的用户交互体验实验设计要将与情感控制和主题一致性相结合设计一个对话生成实验您可以按照以下步骤进行数据集选择选择适合对话生成情感分析和主题建模的公开数据集以下是一些常用的数据集数据集包含个日常对话涵盖情感标签适用于情感分析和对话生成任务数据集包含个对话配有人物描述适用于个性化对话生成和情感控制研究数据集包含个对话涵盖多种情感标签适用于情感分析和对话生成任务数据集包含个对话适用于对话生成和主题一致性研究数据集包含超过亿个对话适用于大规模对话生成和主题建模研究模型架构在传统的编码器解码器架构基础上结合来建模对话生成过程编码器使用预训练的语言模型如或对输入对话进行编码提取上下文信息潜在空间建模引入模型将对话的潜在表示视为在潜在空间中逐步演化的过程解码器使用解码器生成回复文本确保生成的回复符合情感和主题要求目标函数设计综合考虑情感控制和主题一致性的目标函数情感一致性损失通过计算生成回复与目标情感标签之间的差异确保回复符合预期情感主题一致性损失利用主题模型如评估生成回复与对话主题的一致性确保回复与对话主题相关生成质量损失使用困惑度或等指标评估生成文本的质量综合这些损失函数构建最终的优化目标优化算法采用适合生成模型的优化算法优化器适用于大规模深度学习模型具有自适应学习率的优势学习率调度使用学习率预热和衰减策略稳定训练过程梯度裁剪防止梯度爆炸确保训练稳定性实验设计设计实验以评估模型在情感控制和主题一致性方面的表现数据预处理对选定的数据集进行清洗和预处理包括去除噪声分词和情感标注模型训练在训练集上训练模型使用验证集进行超参数调优评估指标使用自动评估指标如困惑度和人工评估如情感一致性评分主题相关性评分综合评估模型性能对比实验与基线模型进行对比验证所提方法的有效性通过上述设计您可以构建一个结合模型情感控制和主题一致性的对话生成系统提升对话生成的质量和一致性是直接将作为目标函数训练吗在对话生成模型的训练中评估指标通常用于模型性能的评估而非直接作为目标函数进行训练传统的训练方法主要依赖于交叉熵损失函数该方法通过最大化生成文本与真实文本之间的相似性来优化模型然而交叉熵损失函数存在一些局限性特别是在对话生成任务中它假设对于给定的输入只有训练集中存在的目标输出是正确的这在实际对话中并不成立因为同一输入可能对应多个有效的回复此外交叉熵损失函数未考虑上下文信息可能导致生成的回复缺乏相关性和多样性为了解决这些问题研究者们提出了将评估指标融入训练过程的策略例如基于强化学习的方法可以将评估指标作为奖励函数指导模型生成更符合预期的回复具体而言模型在生成回复时会根据评估指标如情感一致性主题相关性等获得相应的奖励从而优化生成策略此外近年来研究者们还提出了新的损失函数如语义融合上下文对话生成损失函数旨在同时考虑上下文和语义相关性以更好地指导对话生成模型的训练综上所述虽然评估指标在模型训练中并非直接作为目标函数但将其融入训练过程作为奖励函数或损失函数的一部分已成为提升对话生成模型性能的有效策略',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-04-20 01:57:25',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 24
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Exisfarの小窝</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友链</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Algorithm/" style="font-size: 1.05rem;">Algorithm<sup>3</sup></a><a href="/tags/CS/" style="font-size: 1.05rem;">CS<sup>1</sup></a><a href="/tags/CUDA/" style="font-size: 1.05rem;">CUDA<sup>1</sup></a><a href="/tags/Compiler/" style="font-size: 1.05rem;">Compiler<sup>2</sup></a><a href="/tags/Database/" style="font-size: 1.05rem;">Database<sup>1</sup></a><a href="/tags/Development/" style="font-size: 1.05rem;">Development<sup>5</sup></a><a href="/tags/Dynamic-Programming/" style="font-size: 1.05rem;">Dynamic Programming<sup>1</sup></a><a href="/tags/English/" style="font-size: 1.05rem;">English<sup>1</sup></a><a href="/tags/Graphics/" style="font-size: 1.05rem;">Graphics<sup>2</sup></a><a href="/tags/HPC/" style="font-size: 1.05rem;">HPC<sup>1</sup></a><a href="/tags/Lexical-Analysis/" style="font-size: 1.05rem;">Lexical Analysis<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/ML/" style="font-size: 1.05rem;">ML<sup>2</sup></a><a href="/tags/Math/" style="font-size: 1.05rem;">Math<sup>3</sup></a><a href="/tags/Network/" style="font-size: 1.05rem;">Network<sup>1</sup></a><a href="/tags/OS/" style="font-size: 1.05rem;">OS<sup>3</sup></a><a href="/tags/OpenGL/" style="font-size: 1.05rem;">OpenGL<sup>1</sup></a><a href="/tags/Progarmming-Model/" style="font-size: 1.05rem;">Progarmming Model<sup>1</sup></a><a href="/tags/Recursion/" style="font-size: 1.05rem;">Recursion<sup>1</sup></a><a href="/tags/Texture/" style="font-size: 1.05rem;">Texture<sup>1</sup></a><a href="/tags/gcc/" style="font-size: 1.05rem;">gcc<sup>1</sup></a><a href="/tags/normalization/" style="font-size: 1.05rem;">normalization<sup>1</sup></a><a href="/tags/regularization/" style="font-size: 1.05rem;">regularization<sup>1</sup></a><a href="/tags/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91/" style="font-size: 1.05rem;">业务逻辑<sup>1</sup></a><a href="/tags/%E4%B9%90%E7%90%86/" style="font-size: 1.05rem;">乐理<sup>1</sup></a><a href="/tags/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">体系结构<sup>1</sup></a><a href="/tags/%E5%81%A5%E8%BA%AB/" style="font-size: 1.05rem;">健身<sup>1</sup></a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 1.05rem;">加密<sup>7</sup></a><a href="/tags/%E5%90%8C%E6%AD%A5/" style="font-size: 1.05rem;">同步<sup>1</sup></a><a href="/tags/%E5%9B%BE%E8%A1%A8/" style="font-size: 1.05rem;">图表<sup>1</sup></a><a href="/tags/%E5%BC%82%E6%AD%A5/" style="font-size: 1.05rem;">异步<sup>2</sup></a><a href="/tags/%E5%BE%AE%E5%88%86/" style="font-size: 1.05rem;">微分<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%A0%88/" style="font-size: 1.05rem;">技术栈<sup>1</sup></a><a href="/tags/%E6%8A%BD%E8%B1%A1%E8%83%BD%E5%8A%9B/" style="font-size: 1.05rem;">抽象能力<sup>1</sup></a><a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 1.05rem;">生活<sup>3</sup></a><a href="/tags/%E8%A1%A3%E7%89%A9%E5%88%86%E7%B1%BB/" style="font-size: 1.05rem;">衣物分类<sup>1</sup></a><a href="/tags/%E8%A1%A8%E8%BE%BE/" style="font-size: 1.05rem;">表达<sup>1</sup></a><a href="/tags/%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE/" style="font-size: 1.05rem;">逻辑表达<sup>1</sup></a><a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 1.05rem;">音乐<sup>1</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE%E7%BB%84%E7%BB%87/" style="font-size: 1.05rem;">项目组织<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">April 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">81</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">March 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">Diffusion for NLP</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-04-19T17:38:00.000Z" title="Created 2025-04-20 01:38:00">2025-04-20</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-04-19T17:57:25.760Z" title="Updated 2025-04-20 01:57:25">2025-04-20</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为Earth"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>Earth</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/nightfall.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://exisfar.github.io/2025/04/20/Research-NLP-diffusion-for-nlp/"><header><h1 id="CrawlerTitle" itemprop="name headline">Diffusion for NLP</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Exisfar</span><time itemprop="dateCreated datePublished" datetime="2025-04-19T17:38:00.000Z" title="Created 2025-04-20 01:38:00">2025-04-20</time><time itemprop="dateCreated datePublished" datetime="2025-04-19T17:57:25.760Z" title="Updated 2025-04-20 01:57:25">2025-04-20</time></header><h1>Diffusion for NLP</h1>
<h2 id="攻略">攻略</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/647875443/answer/17078217758">Diffusion Forcing: Next-token Prediction Meets Full-Sequence Diffusion 2024年了diffusion还有什么可做的？ - ACER的回答 - 知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/685633240">Diffusion LLM 会不会是未来？ - YSUN LIN的文章 - 知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bansky-cl/diffusion-nlp-paper-arxiv">diffusion-nlp-paper-arxiv</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/603543473">Diffusion 在NLP方向相关工作追踪(持续更新) - Snail的文章 - 知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/8630858503/answer/73508359541">扩散模型（DM）在自然语言处理（NLP）领域相比大语言模型（LLM）有什么优势？ - Zephyr的回答 - 知乎</a></li>
</ul>
<h2 id="思路">思路</h2>
<p>基于Diffusion的对话模型确实是一个热门方向，但创新确实需要大量工程和理论工作。你提到的Diffusion Forcing和ICML 2024的最佳论文提供了新的思路，以下是一些可能的方向：</p>
<h3 id="1-Diffusion-Forcing">1. <strong>Diffusion Forcing</strong></h3>
<ul>
<li><strong>核心思想</strong>：通过外部信号引导生成过程，提升生成质量。</li>
<li><strong>创新方向</strong>：
<ul>
<li><strong>对话中的情感控制</strong>：利用情感标签作为引导信号，生成符合特定情感的回复。</li>
<li><strong>主题一致性</strong>：通过主题关键词引导生成，确保对话内容的一致性。</li>
<li><strong>多模态引导</strong>：结合图像或音频信号，生成更丰富的回复。</li>
</ul>
</li>
</ul>
<h3 id="2-ICML-2024-最佳论文">2. <strong>ICML 2024 最佳论文</strong></h3>
<ul>
<li><strong>核心思想</strong>：论文可能提出了新的理论框架或优化方法，提升Diffusion模型在NLP中的表现。</li>
<li><strong>创新方向</strong>：
<ul>
<li><strong>简化理论框架</strong>：将论文中的理论简化并应用到对话模型中，降低计算复杂度。</li>
<li><strong>结合预训练模型</strong>：将Diffusion与BERT、GPT等结合，提升生成质量。</li>
<li><strong>动态调整扩散过程</strong>：根据上下文动态调整扩散参数，提升生成灵活性。</li>
</ul>
</li>
</ul>
<h3 id="3-其他创新方向">3. <strong>其他创新方向</strong></h3>
<ul>
<li><strong>Few-shot Learning</strong>：在少量数据上微调Diffusion模型，适应新任务。</li>
<li><strong>可解释性</strong>：通过可视化扩散过程，提升模型的可解释性。</li>
<li><strong>实时生成优化</strong>：优化推理速度，实现实时对话生成。</li>
</ul>
<h3 id="4-工程实现">4. <strong>工程实现</strong></h3>
<ul>
<li><strong>模块化设计</strong>：将扩散过程、引导机制等模块化，便于实验和优化。</li>
<li><strong>开源工具</strong>：使用Diffusers、Hugging Face等工具，加速开发。</li>
<li><strong>分布式训练</strong>：利用分布式训练加速大规模数据训练。</li>
</ul>
<h3 id="总结">总结</h3>
<p>结合Diffusion Forcing和ICML 2024论文的思路，你可以从情感控制、主题一致性、Few-shot Learning等方向入手，结合模块化设计和开源工具，逐步实现创新。</p>
<h2 id="思路2">思路2</h2>
<p>将<strong>Diffusion Forcing: Next-token Prediction</strong>与<strong>情感控制</strong>、<strong>主题一致性</strong>等结合，可以为对话生成模型带来更高的灵活性和精度。通过结合这些技术，可以在对话生成的过程中动态地引导模型生成符合预期情感和主题一致性的内容。以下是一些可能的创新方向：</p>
<h3 id="1-情感控制">1. <strong>情感控制</strong></h3>
<p>情感控制通常涉及让对话生成模型能够根据预定的情感目标（例如愉快、悲伤、生气等）来调整生成的文本内容。通过将<strong>diffusion models</strong>引入情感控制，你可以：</p>
<ul>
<li>
<p><strong>情感特征嵌入</strong>：在输入的文本或上下文中加入情感标记（例如情感向量），使模型在生成过程中根据该情感进行调整。结合diffusion模型，可以将情感信息在diffusion过程的每一个步骤中逐渐融合到模型的潜在空间，使得生成的文本逐步“渗透”情感特征。</p>
</li>
<li>
<p><strong>扩展情感空间</strong>：在生成过程中，你可以通过diffusion模型在潜在空间中进行采样，并且在生成的每一步都向特定的情感目标（例如喜怒哀乐的平衡）进行逼近。这能够让模型在多轮对话中保持一致的情感色彩。</p>
</li>
<li>
<p><strong>情感引导的Next-token Prediction</strong>：通过将情感信息与每个生成步骤的next-token预测相结合，使用diffusion模型来细化情感目标，确保每个预测的token在情感维度上都符合预期。这种方法能够让模型在每一步中保持情感的平滑过渡和一致性。</p>
</li>
</ul>
<h3 id="2-主题一致性">2. <strong>主题一致性</strong></h3>
<p>对话的主题一致性非常重要，尤其是长时间交互中的对话维度。结合diffusion模型和主题控制可以在以下方面进行创新：</p>
<ul>
<li>
<p><strong>主题潜在空间</strong>：在diffusion模型中，引入主题向量作为潜在空间的一部分。这样，模型可以在生成过程中逐步引导每个生成步骤朝着特定的主题方向发展。例如，diffusion模型可以从随机噪声开始逐步生成具有主题一致性的对话。</p>
</li>
<li>
<p><strong>主题一致性损失函数</strong>：为确保对话的主题一致性，可以设计一个损失函数，评估对话中每一步的主题一致性。通过diffusion模型，可以在每个生成步骤上对主题一致性进行微调。例如，可以在模型的潜在空间中引入主题特征，并通过diffusion过程让这些特征逐渐展现出来，确保生成的对话在每一轮对话中都能保持主题连贯。</p>
</li>
<li>
<p><strong>动态主题分配</strong>：结合<strong>主题建模</strong>（如LDA、BERTopic等）与diffusion模型，在每一轮对话生成时，动态地根据当前对话状态进行主题分配。通过diffusion过程来平滑和引导主题变化，使得每轮对话生成过程中主题逐渐转变，但不失去对话的一致性。</p>
</li>
</ul>
<h3 id="3-结合情感与主题一致性">3. <strong>结合情感与主题一致性</strong></h3>
<p>情感和主题一致性通常是交织在一起的。例如，在进行客户支持对话时，情感和主题应保持一致。通过结合这两者，可以进行以下创新：</p>
<ul>
<li>
<p><strong>多任务学习</strong>：设计一个多任务学习框架，其中一个任务负责情感控制，另一个任务负责主题一致性。通过diffusion模型的每个步骤，你可以根据情感目标和主题目标，分别对潜在空间进行调控，确保每个token的生成都能同时满足这两个目标。</p>
</li>
<li>
<p><strong>情感-主题关联映射</strong>：通过建模情感和主题之间的相互关系，可以使模型在进行对话生成时，在潜在空间中同时融合情感和主题信息。这样，不仅可以在每一步生成过程中控制情感的变化，还能保证对话的主题在情感变化过程中不失去一致性。</p>
</li>
<li>
<p><strong>情感主题混合空间</strong>：在潜在空间中设计情感-主题混合的表示，使得每个生成步骤都考虑到情感和主题的共同影响。例如，可以在diffusion过程中将情感标签与主题标签结合，使得每个生成的token既符合当前情感的调性，也符合对话主题的一致性。</p>
</li>
</ul>
<h3 id="4-具体的工作路径">4. <strong>具体的工作路径</strong></h3>
<ul>
<li>
<p><strong>训练阶段</strong>：你可以通过自监督学习的方式，在对话数据中标注情感和主题标签，并利用这些标签在diffusion过程中引导生成模型。通过引导潜在空间的演化，使得情感和主题信息在生成过程中逐步融入。</p>
</li>
<li>
<p><strong>多模态信息引导</strong>：结合情感分析和主题建模的输出作为多模态信息（例如文本中的情感分类和主题标签），用作diffusion模型的输入，引导模型生成符合要求的对话。</p>
</li>
<li>
<p><strong>反馈机制</strong>：在实际应用中，可以通过建立反馈机制，让生成的对话逐步进行调整。通过对话的情感和主题表现进行评分，并将这些评分作为奖励信号，帮助diffusion模型优化生成策略，进一步提升情感一致性和主题连贯性。</p>
</li>
</ul>
<p>通过结合<strong>diffusion models</strong>、<strong>情感控制</strong>和<strong>主题一致性</strong>，你可以创建一个更智能、情感更丰富、主题连贯的对话系统，提供更高质量的用户交互体验。</p>
<h2 id="实验设计">实验设计</h2>
<p>要将<strong>Diffusion Forcing: Next-token Prediction</strong>与<strong>情感控制</strong>和<strong>主题一致性</strong>相结合，设计一个对话生成实验，您可以按照以下步骤进行：</p>
<h3 id="1-数据集选择">1. 数据集选择</h3>
<p>选择适合对话生成、情感分析和主题建模的公开数据集。以下是一些常用的数据集：</p>
<p>:::contextList<br>
【{“image_fetch”: “DailyDialog 数据集”}】<br>
<strong>DailyDialog</strong><br>
包含13,118个日常对话，涵盖情感标签，适用于情感分析和对话生成任务。<br>
:::</p>
<p>:::contextList<br>
【{“image_fetch”: “Persona-Chat 数据集”}】<br>
<strong>Persona-Chat</strong><br>
包含10,000个对话，配有人物描述，适用于个性化对话生成和情感控制研究。<br>
:::</p>
<p>:::contextList<br>
【{“image_fetch”: “EmpatheticDialogues 数据集”}】<br>
<strong>EmpatheticDialogues</strong><br>
包含25,000个对话，涵盖多种情感标签，适用于情感分析和对话生成任务。<br>
:::</p>
<p>:::contextList<br>
【{“image_fetch”: “Cornell Movie Dialogues 数据集”}】<br>
<strong>Cornell Movie Dialogues</strong><br>
包含220,000个对话，适用于对话生成和主题一致性研究。<br>
:::</p>
<p>:::contextList<br>
【{“image_fetch”: “Reddit Conversations 数据集”}】<br>
<strong>Reddit Conversations</strong><br>
包含超过1亿个对话，适用于大规模对话生成和主题建模研究。<br>
:::</p>
<h3 id="2-模型架构">2. 模型架构</h3>
<p>在传统的编码器-解码器架构基础上，结合<strong>Diffusion Models</strong>来建模对话生成过程。</p>
<ul>
<li>
<p><strong>编码器</strong>：使用预训练的语言模型（如BERT或GPT）对输入对话进行编码，提取上下文信息。</p>
</li>
<li>
<p><strong>潜在空间建模</strong>：引入Diffusion模型，将对话的潜在表示视为在潜在空间中逐步演化的过程。</p>
</li>
<li>
<p><strong>解码器</strong>：使用解码器生成回复文本，确保生成的回复符合情感和主题要求。</p>
</li>
</ul>
<h3 id="3-目标函数">3. 目标函数</h3>
<p>设计综合考虑情感控制和主题一致性的目标函数：</p>
<ul>
<li>
<p><strong>情感一致性损失</strong>：通过计算生成回复与目标情感标签之间的差异，确保回复符合预期情感。</p>
</li>
<li>
<p><strong>主题一致性损失</strong>：利用主题模型（如LDA）评估生成回复与对话主题的一致性，确保回复与对话主题相关。</p>
</li>
<li>
<p><strong>生成质量损失</strong>：使用困惑度（Perplexity）或BLEU等指标评估生成文本的质量。</p>
</li>
</ul>
<p>综合这些损失函数，构建最终的优化目标。</p>
<h3 id="4-优化算法">4. 优化算法</h3>
<p>采用适合生成模型的优化算法：</p>
<ul>
<li>
<p><strong>Adam优化器</strong>：适用于大规模深度学习模型，具有自适应学习率的优势。</p>
</li>
<li>
<p><strong>学习率调度</strong>：使用学习率预热和衰减策略，稳定训练过程。</p>
</li>
<li>
<p><strong>梯度裁剪</strong>：防止梯度爆炸，确保训练稳定性。</p>
</li>
</ul>
<h3 id="5-实验设计">5. 实验设计</h3>
<p>设计实验以评估模型在情感控制和主题一致性方面的表现：</p>
<ul>
<li>
<p><strong>数据预处理</strong>：对选定的数据集进行清洗和预处理，包括去除噪声、分词和情感标注。</p>
</li>
<li>
<p><strong>模型训练</strong>：在训练集上训练模型，使用验证集进行超参数调优。</p>
</li>
<li>
<p><strong>评估指标</strong>：使用自动评估指标（如BLEU、ROUGE、困惑度）和人工评估（如情感一致性评分、主题相关性评分）综合评估模型性能。</p>
</li>
<li>
<p><strong>对比实验</strong>：与基线模型进行对比，验证所提方法的有效性。</p>
</li>
</ul>
<p>通过上述设计，您可以构建一个结合Diffusion模型、情感控制和主题一致性的对话生成系统，提升对话生成的质量和一致性。</p>
<h3 id="是直接将matric作为目标函数训练吗？">是直接将matric作为目标函数训练吗？</h3>
<p>在对话生成模型的训练中，评估指标（metrics）通常用于模型性能的评估，而非直接作为目标函数进行训练。传统的训练方法主要依赖于交叉熵损失函数（cross-entropy loss），该方法通过最大化生成文本与真实文本之间的相似性来优化模型。</p>
<p>然而，交叉熵损失函数存在一些局限性，特别是在对话生成任务中。它假设对于给定的输入，只有训练集中存在的目标输出是正确的，这在实际对话中并不成立，因为同一输入可能对应多个有效的回复。此外，交叉熵损失函数未考虑上下文信息，可能导致生成的回复缺乏相关性和多样性。</p>
<p>为了解决这些问题，研究者们提出了将评估指标融入训练过程的策略。例如，基于强化学习的方法可以将评估指标作为奖励函数，指导模型生成更符合预期的回复。具体而言，模型在生成回复时，会根据评估指标（如情感一致性、主题相关性等）获得相应的奖励，从而优化生成策略。</p>
<p>此外，近年来，研究者们还提出了新的损失函数，如语义融合上下文对话生成损失函数（SemTextualLogue loss function），旨在同时考虑上下文和语义相关性，以更好地指导对话生成模型的训练。 citeturn0academia10</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/abs/2309.05804?utm_source=chatgpt.com">Hi Model, generating ‘nice’ instead of ‘good’ is not as bad as generating ‘rice’! Towards Context and Semantic Infused Dialogue Generation Loss Function and Evaluation Metric</a></p>
</blockquote>
<p>综上所述，虽然评估指标在模型训练中并非直接作为目标函数，但将其融入训练过程，作为奖励函数或损失函数的一部分，已成为提升对话生成模型性能的有效策略。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/avatar.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/avatar.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Exisfar</div><div class="post-copyright__author_desc">这是我的小窝，欢迎光临！</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://exisfar.github.io/2025/04/20/Research-NLP-diffusion-for-nlp/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://exisfar.github.io/2025/04/20/Research-NLP-diffusion-for-nlp/')">Diffusion for NLP</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://exisfar.github.io/2025/04/20/Research-NLP-diffusion-for-nlp/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Diffusion for NLP&amp;url=https://exisfar.github.io/2025/04/20/Research-NLP-diffusion-for-nlp/&amp;pic=/img/nightfall.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/04/20/Research-NLP-nlp/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/nightfall.png" onerror="onerror=null;src='/img/nightfall.png'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">NLP</div></div></a></div><div class="next-post pull-right"><a href="/2025/04/20/Research-NLP-diffusemp/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/nightfall.png" onerror="onerror=null;src='/img/nightfall.png'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Diffusion for Empathetic Response Generation</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> Comment</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="https://emotion.acs.pw/emotion/HONKAI3/16.gif" alt="status"/></div></div><div class="author-info__description">Full Stack Developer</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Exisfar</h1><div class="author-info__desc">这是我的小窝，欢迎光临！</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Exisfar" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="/cunyuanwu@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Diffusion for NLP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%BB%E7%95%A5"><span class="toc-number">1.1.</span> <span class="toc-text">攻略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-number">1.2.</span> <span class="toc-text">思路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Diffusion-Forcing"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. Diffusion Forcing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ICML-2024-%E6%9C%80%E4%BD%B3%E8%AE%BA%E6%96%87"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. ICML 2024 最佳论文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%85%B6%E4%BB%96%E5%88%9B%E6%96%B0%E6%96%B9%E5%90%91"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 其他创新方向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B7%A5%E7%A8%8B%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 工程实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.2.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF2"><span class="toc-number">1.3.</span> <span class="toc-text">思路2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%83%85%E6%84%9F%E6%8E%A7%E5%88%B6"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 情感控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%BB%E9%A2%98%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 主题一致性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BB%93%E5%90%88%E6%83%85%E6%84%9F%E4%B8%8E%E4%B8%BB%E9%A2%98%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 结合情感与主题一致性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%85%B7%E4%BD%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E8%B7%AF%E5%BE%84"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. 具体的工作路径</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.4.</span> <span class="toc-text">实验设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E9%9B%86%E9%80%89%E6%8B%A9"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 数据集选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A8%A1%E5%9E%8B%E6%9E%B6%E6%9E%84"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 模型架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%9B%AE%E6%A0%87%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 目标函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. 优化算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%AE%9E%E9%AA%8C%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.4.5.</span> <span class="toc-text">5. 实验设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%AF%E7%9B%B4%E6%8E%A5%E5%B0%86matric%E4%BD%9C%E4%B8%BA%E7%9B%AE%E6%A0%87%E5%87%BD%E6%95%B0%E8%AE%AD%E7%BB%83%E5%90%97%EF%BC%9F"><span class="toc-number">1.4.6.</span> <span class="toc-text">是直接将matric作为目标函数训练吗？</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/29/CS-Development-%E5%90%8C%E6%AD%A5vs%E5%BC%82%E6%AD%A5/" title="同步 vs 异步：核心区别、适用场景与实现技术">同步 vs 异步：核心区别、适用场景与实现技术</a><time datetime="2025-04-29T13:35:00.000Z" title="Created 2025-04-29 21:35:00">2025-04-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/29/CS-PL-JS-asynchronous-programming/" title="Javascript: Asynchronous Programming">Javascript: Asynchronous Programming</a><time datetime="2025-04-28T17:38:00.000Z" title="Created 2025-04-29 01:38:00">2025-04-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/27/CS-Development-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91/" title="业务逻辑 (Buisness Logic)">业务逻辑 (Buisness Logic)</a><time datetime="2025-04-27T06:50:00.000Z" title="Created 2025-04-27 14:50:00">2025-04-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/26/CS-OS-%E9%9D%A2%E8%AF%95/" title="OS: 面试">OS: 面试</a><time datetime="2025-04-26T04:51:00.000Z" title="Created 2025-04-26 12:51:00">2025-04-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/26/CS-Graphics-texture/" title="Graphics: Texture">Graphics: Texture</a><time datetime="2025-04-26T03:39:00.000Z" title="Created 2025-04-26 11:39:00">2025-04-26</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Exisfar" target="_blank">Exisfar</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">82</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">52</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">26</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://exisfar.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="https://exisfar.github.io/" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友链</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Algorithm/" style="font-size: 0.88rem;">Algorithm<sup>3</sup></a><a href="/tags/CS/" style="font-size: 0.88rem;">CS<sup>1</sup></a><a href="/tags/CUDA/" style="font-size: 0.88rem;">CUDA<sup>1</sup></a><a href="/tags/Compiler/" style="font-size: 0.88rem;">Compiler<sup>2</sup></a><a href="/tags/Database/" style="font-size: 0.88rem;">Database<sup>1</sup></a><a href="/tags/Development/" style="font-size: 0.88rem;">Development<sup>5</sup></a><a href="/tags/Dynamic-Programming/" style="font-size: 0.88rem;">Dynamic Programming<sup>1</sup></a><a href="/tags/English/" style="font-size: 0.88rem;">English<sup>1</sup></a><a href="/tags/Graphics/" style="font-size: 0.88rem;">Graphics<sup>2</sup></a><a href="/tags/HPC/" style="font-size: 0.88rem;">HPC<sup>1</sup></a><a href="/tags/Lexical-Analysis/" style="font-size: 0.88rem;">Lexical Analysis<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/ML/" style="font-size: 0.88rem;">ML<sup>2</sup></a><a href="/tags/Math/" style="font-size: 0.88rem;">Math<sup>3</sup></a><a href="/tags/Network/" style="font-size: 0.88rem;">Network<sup>1</sup></a><a href="/tags/OS/" style="font-size: 0.88rem;">OS<sup>3</sup></a><a href="/tags/OpenGL/" style="font-size: 0.88rem;">OpenGL<sup>1</sup></a><a href="/tags/Progarmming-Model/" style="font-size: 0.88rem;">Progarmming Model<sup>1</sup></a><a href="/tags/Recursion/" style="font-size: 0.88rem;">Recursion<sup>1</sup></a><a href="/tags/Texture/" style="font-size: 0.88rem;">Texture<sup>1</sup></a><a href="/tags/gcc/" style="font-size: 0.88rem;">gcc<sup>1</sup></a><a href="/tags/normalization/" style="font-size: 0.88rem;">normalization<sup>1</sup></a><a href="/tags/regularization/" style="font-size: 0.88rem;">regularization<sup>1</sup></a><a href="/tags/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91/" style="font-size: 0.88rem;">业务逻辑<sup>1</sup></a><a href="/tags/%E4%B9%90%E7%90%86/" style="font-size: 0.88rem;">乐理<sup>1</sup></a><a href="/tags/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">体系结构<sup>1</sup></a><a href="/tags/%E5%81%A5%E8%BA%AB/" style="font-size: 0.88rem;">健身<sup>1</sup></a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 0.88rem;">加密<sup>7</sup></a><a href="/tags/%E5%90%8C%E6%AD%A5/" style="font-size: 0.88rem;">同步<sup>1</sup></a><a href="/tags/%E5%9B%BE%E8%A1%A8/" style="font-size: 0.88rem;">图表<sup>1</sup></a><a href="/tags/%E5%BC%82%E6%AD%A5/" style="font-size: 0.88rem;">异步<sup>2</sup></a><a href="/tags/%E5%BE%AE%E5%88%86/" style="font-size: 0.88rem;">微分<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%A0%88/" style="font-size: 0.88rem;">技术栈<sup>1</sup></a><a href="/tags/%E6%8A%BD%E8%B1%A1%E8%83%BD%E5%8A%9B/" style="font-size: 0.88rem;">抽象能力<sup>1</sup></a><a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 0.88rem;">生活<sup>3</sup></a><a href="/tags/%E8%A1%A3%E7%89%A9%E5%88%86%E7%B1%BB/" style="font-size: 0.88rem;">衣物分类<sup>1</sup></a><a href="/tags/%E8%A1%A8%E8%BE%BE/" style="font-size: 0.88rem;">表达<sup>1</sup></a><a href="/tags/%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE/" style="font-size: 0.88rem;">逻辑表达<sup>1</sup></a><a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 0.88rem;">音乐<sup>1</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE%E7%BB%84%E7%BB%87/" style="font-size: 0.88rem;">项目组织<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="9433227449" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/9433227449&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Exisfar 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(()=>{
  const getGiscusTheme = theme => {
    return theme === 'dark' ? 'dark' : 'light'
  }

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.app/client.js',
      'data-repo': 'Exisfar/Exisfar.github.io',
      'data-repo-id': 'R_kgDOOPtzpw',
      'data-category-id': 'DIC_kwDOOPtzp84CpOlz',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },{"data-lang":"zh-CN","data-mapping":"pathname","data-category":"Announcements","data-input-position":"bottom"})

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const sendMessage = message => {
      const iframe = document.querySelector('iframe.giscus-frame')
      if (!iframe) return
      iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app')
    }

    sendMessage({
      setConfig: {
        theme: getGiscusTheme(theme)
      }
    });
  }

  anzhiyu.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Giscus' === 'Giscus' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>