<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Recursion | Exisfarの小窝</title><meta name="keywords" content="Algorithm,Recursion"><meta name="author" content="Exisfar"><meta name="copyright" content="Exisfar"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Recursion"><meta name="application-name" content="Recursion"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Recursion"><meta property="og:url" content="https://exisfar.github.io/2025/04/20/CS-Algorithm-recursion/index.html"><meta property="og:site_name" content="Exisfarの小窝"><meta property="og:description" content="Recursion  First write it in the most natural way and especially only optimize if profiling shows it is critical.  Why recursion is often slower than"><meta property="og:locale" content="en"><meta property="og:image" content="https://exisfar.github.io/img/nightfall.png"><meta property="article:author" content="Exisfar"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://exisfar.github.io/img/nightfall.png"><meta name="description" content="Recursion  First write it in the most natural way and especially only optimize if profiling shows it is critical.  Why recursion is often slower than"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://exisfar.github.io/2025/04/20/CS-Algorithm-recursion/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":true,"limitCount":50,"languages":{"author":"Author: Exisfar","link":"Link: ","source":"Source: Exisfarの小窝","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Exisfarの小窝',
  title: 'Recursion',
  postAI: '',
  pageFillDescription: 'Recursion, Why recursion is often slower than iterative solutions?, Functional programming language, 函数式语言是否更适合写递归？, 1. 函数式语言为何适合递归？, (1) 无副作用（Immutable Data）, (2) 尾递归优化（Tail Call Optimization TCO）, (3) 模式匹配（Pattern Matching）, (4) 高阶函数支持, 2. 命令式语言为何不太适合递归？, (1) 默认不支持尾递归优化, (2) 可变状态（Mutable State）, (3) 性能开销, 3. 何时用递归？何时用迭代？, 4. 跨语言递归示例对比, (1) 求和（1+2+…+n）, 函数式风格（Scheme）, 命令式风格（Python）, (2) 树的中序遍历, 函数式风格（Haskell）, 命令式风格（Java）, 5. 总结, 二级指针代替递归？, 1. 二级指针的优缺点, 优点：, 缺点：, 2. 递归 vs 二级指针迭代：如何选择？, 3. 各语言下的实践建议, C/C++：, Python/Java：, Go：, 4. 黄金准则, 5. 经典案例参考函数式语言是否更适合写递归是的函数式语言如天然适合递归而命令式语言如通常更适合迭代原因如下函数式语言为何适合递归无副作用函数式语言的数据默认不可变递归时无需担心状态被修改逻辑更纯粹示例计算阶乘纯递归无变量修改尾递归优化函数式语言的编译器解释器自动优化尾递归为循环避免栈溢出示例尾递归求和尾递归被优化为迭代模式匹配函数式语言通过模式匹配简化递归的终止条件和分支逻辑示例计算斐波那契数列递归模式匹配高阶函数支持等高阶函数隐藏了递归细节开发者只需关注逻辑示例用求和无需手动写递归命令式语言为何不太适合递归默认不支持尾递归优化未优化时的递归深度受栈大小限制易溢出非尾递归栈溢出风险可变状态循环修改变量更直观递归需额外传递状态如累加器的迭代更常见性能开销递归的函数调用成本高于循环压栈弹栈操作在性能敏感场景不占优何时用递归何时用迭代场景推荐方式示例语言函数式编程无副作用递归命令式编程需性能易调试迭代分治算法如快速排序递归尾递归优化所有语言线性操作如求和遍历迭代所有语言跨语言递归示例对比求和函数式风格尾递归优化命令式风格树的中序遍历函数式风格命令式风格总结函数式语言递归是首选因语言设计支持不可变数据模式匹配命令式语言优先用迭代递归仅用于分治等特定场景或手动优化为尾递归通用建议如果语言支持如可放心用递归在中递归深度大时改用迭代或尾递归累加器递归的本质是分治迭代的本质是状态更新根据场景选择二级指针代替递归在实际开发中是否使用二级指针或类似技术取决于代码可读性维护性性能需求和团队规范以下是具体分析二级指针的优缺点优点精确控制内存直接操作指针的指针适合底层系统开发如内核嵌入式避免拷贝开销通过指针修改数据而非传递值如修改链表头节点模拟栈的迭代实现在非递归算法中替代递归调用栈如树的迭代构建缺点可读性差二级指针容易让代码变得晦涩如易出错指针操作稍有不慎会导致悬空指针内存泄漏语言限制等无显式指针的语言需用替代方案如包装类递归二级指针迭代如何选择场景推荐方案理由小规模数据递归代码简洁符合直觉如树的遍历分治算法大规模数据迭代二级指针栈模拟避免栈溢出更可控如处理深度超过的树性能敏感场景迭代递归的函数调用开销较高但编译器优化后差异可能变小团队协作维护性优先递归递归更易读除非明确需要避免递归如代码规范禁止无尾递归优化的语言迭代等语言递归深度有限需手动改迭代各语言下的实践建议优先递归除非栈深度可能爆炸如处理用户输入的巨型树二级指针迭代示例插入递归索引传递用子数组范围替代指针迭代方案用栈队列包装类如的的迭代示例无指针灵活选择的递归优化较好但也可用指针的指针黄金准则默认用递归除非有明确理由如性能栈深度团队规范二级指针迭代的适用场景需要极致性能如高频交易系统递归深度不可控如解析用户生成的深层语言强制要求如某些嵌入式环境禁用递归代码可读性微优化除非性能测试证明递归是瓶颈经典案例参考内核大量使用二级指针操作链表库迭代实现优先如用迭代避免递归栈溢出标准库递归为主如用递归',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-04-26 13:01:30',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 24
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Exisfarの小窝</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友链</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Algorithm/" style="font-size: 1.05rem;">Algorithm<sup>3</sup></a><a href="/tags/CS/" style="font-size: 1.05rem;">CS<sup>1</sup></a><a href="/tags/CUDA/" style="font-size: 1.05rem;">CUDA<sup>1</sup></a><a href="/tags/Compiler/" style="font-size: 1.05rem;">Compiler<sup>2</sup></a><a href="/tags/Database/" style="font-size: 1.05rem;">Database<sup>1</sup></a><a href="/tags/Development/" style="font-size: 1.05rem;">Development<sup>5</sup></a><a href="/tags/Dynamic-Programming/" style="font-size: 1.05rem;">Dynamic Programming<sup>1</sup></a><a href="/tags/English/" style="font-size: 1.05rem;">English<sup>1</sup></a><a href="/tags/Graphics/" style="font-size: 1.05rem;">Graphics<sup>2</sup></a><a href="/tags/HPC/" style="font-size: 1.05rem;">HPC<sup>1</sup></a><a href="/tags/Lexical-Analysis/" style="font-size: 1.05rem;">Lexical Analysis<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/ML/" style="font-size: 1.05rem;">ML<sup>2</sup></a><a href="/tags/Math/" style="font-size: 1.05rem;">Math<sup>3</sup></a><a href="/tags/Network/" style="font-size: 1.05rem;">Network<sup>1</sup></a><a href="/tags/OS/" style="font-size: 1.05rem;">OS<sup>3</sup></a><a href="/tags/OpenGL/" style="font-size: 1.05rem;">OpenGL<sup>1</sup></a><a href="/tags/Progarmming-Model/" style="font-size: 1.05rem;">Progarmming Model<sup>1</sup></a><a href="/tags/Recursion/" style="font-size: 1.05rem;">Recursion<sup>1</sup></a><a href="/tags/Texture/" style="font-size: 1.05rem;">Texture<sup>1</sup></a><a href="/tags/gcc/" style="font-size: 1.05rem;">gcc<sup>1</sup></a><a href="/tags/normalization/" style="font-size: 1.05rem;">normalization<sup>1</sup></a><a href="/tags/regularization/" style="font-size: 1.05rem;">regularization<sup>1</sup></a><a href="/tags/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91/" style="font-size: 1.05rem;">业务逻辑<sup>1</sup></a><a href="/tags/%E4%B9%90%E7%90%86/" style="font-size: 1.05rem;">乐理<sup>1</sup></a><a href="/tags/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">体系结构<sup>1</sup></a><a href="/tags/%E5%81%A5%E8%BA%AB/" style="font-size: 1.05rem;">健身<sup>1</sup></a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 1.05rem;">加密<sup>7</sup></a><a href="/tags/%E5%90%8C%E6%AD%A5/" style="font-size: 1.05rem;">同步<sup>1</sup></a><a href="/tags/%E5%9B%BE%E8%A1%A8/" style="font-size: 1.05rem;">图表<sup>1</sup></a><a href="/tags/%E5%BC%82%E6%AD%A5/" style="font-size: 1.05rem;">异步<sup>2</sup></a><a href="/tags/%E5%BE%AE%E5%88%86/" style="font-size: 1.05rem;">微分<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%A0%88/" style="font-size: 1.05rem;">技术栈<sup>1</sup></a><a href="/tags/%E6%8A%BD%E8%B1%A1%E8%83%BD%E5%8A%9B/" style="font-size: 1.05rem;">抽象能力<sup>1</sup></a><a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 1.05rem;">生活<sup>3</sup></a><a href="/tags/%E8%A1%A3%E7%89%A9%E5%88%86%E7%B1%BB/" style="font-size: 1.05rem;">衣物分类<sup>1</sup></a><a href="/tags/%E8%A1%A8%E8%BE%BE/" style="font-size: 1.05rem;">表达<sup>1</sup></a><a href="/tags/%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE/" style="font-size: 1.05rem;">逻辑表达<sup>1</sup></a><a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 1.05rem;">音乐<sup>1</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE%E7%BB%84%E7%BB%87/" style="font-size: 1.05rem;">项目组织<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">April 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">81</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">March 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Algorithm/" itemprop="url">Algorithm</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Algorithm/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Algorithm</span></a><a class="article-meta__tags" href="/tags/Recursion/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Recursion</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Recursion</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-04-19T17:38:00.000Z" title="Created 2025-04-20 01:38:00">2025-04-20</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-04-26T05:01:30.651Z" title="Updated 2025-04-26 13:01:30">2025-04-26</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为Earth"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>Earth</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/nightfall.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://exisfar.github.io/2025/04/20/CS-Algorithm-recursion/"><header><a class="post-meta-categories" href="/categories/Algorithm/" itemprop="url">Algorithm</a><a href="/tags/Algorithm/" tabindex="-1" itemprop="url">Algorithm</a><a href="/tags/Recursion/" tabindex="-1" itemprop="url">Recursion</a><h1 id="CrawlerTitle" itemprop="name headline">Recursion</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Exisfar</span><time itemprop="dateCreated datePublished" datetime="2025-04-19T17:38:00.000Z" title="Created 2025-04-20 01:38:00">2025-04-20</time><time itemprop="dateCreated datePublished" datetime="2025-04-26T05:01:30.651Z" title="Updated 2025-04-26 13:01:30">2025-04-26</time></header><h1>Recursion</h1>
<blockquote>
<p><em>First write it in the most natural way and especially only optimize if profiling shows it is critical.</em></p>
</blockquote>
<h2 id="Why-recursion-is-often-slower-than-iterative-solutions">Why recursion is often slower than iterative solutions?</h2>
<p>Most answers here forget the obvious culprit why recursion is often slower than iterative solutions. It’s linked with the build up and tear down of stack frames but is not exactly that. It’s generally a big difference in the storage of the auto variable for each recursion. In an iterative algorithm with a loop, the variables are often held in registers and even if they spill, they will reside in the Level 1 cache. In a recursive algorithm, all intermediary states of the variable are stored on the stack, meaning they will generate many more spills to memory. This means that even if it makes the same amount of operations, it will have a lot memory accesses in the hot loop and what makes it worse, these memory operations have a lousy reuse rate making the caches less effective.</p>
<p>TL;DR recursive algorithms have generally a worse cache behavior than iterative ones.</p>
<h2 id="Functional-programming-language">Functional programming language</h2>
<h3 id="函数式语言是否更适合写递归？"><strong>函数式语言是否更适合写递归？</strong></h3>
<p><strong>是的，函数式语言（如 Haskell、Erlang、Scheme）天然适合递归</strong>，而命令式语言（如 C、Python、Java）通常更适合迭代。原因如下：</p>
<hr>
<h2 id="1-函数式语言为何适合递归？"><strong>1. 函数式语言为何适合递归？</strong></h2>
<h3 id="1-无副作用（Immutable-Data）"><strong>(1) 无副作用（Immutable Data）</strong></h3>
<p>• 函数式语言的数据默认不可变，递归时无需担心状态被修改，逻辑更纯粹。<br>
• <strong>示例（Haskell 计算阶乘）</strong>：</p>
  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">factorial</span> <span class="number">0</span> = <span class="number">1</span></span><br><span class="line"><span class="title">factorial</span> n = n * factorial (n - <span class="number">1</span>)  <span class="comment">-- 纯递归，无变量修改</span></span><br></pre></td></tr></table></figure>
<h3 id="2-尾递归优化（Tail-Call-Optimization-TCO）"><strong>(2) 尾递归优化（Tail Call Optimization, TCO）</strong></h3>
<p>• 函数式语言的编译器/解释器<strong>自动优化尾递归</strong>为循环，避免栈溢出。<br>
• <strong>示例（Scheme 尾递归求和）</strong>：</p>
  <figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">sum</span> n acc)</span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">=</span></span> n <span class="number">0</span>)</span><br><span class="line">      acc</span><br><span class="line">      (<span class="name">sum</span> (<span class="name"><span class="built_in">-</span></span> n <span class="number">1</span>) (<span class="name"><span class="built_in">+</span></span> acc n))))  <span class="comment">;; 尾递归 → 被优化为迭代</span></span><br></pre></td></tr></table></figure>
<h3 id="3-模式匹配（Pattern-Matching）"><strong>(3) 模式匹配（Pattern Matching）</strong></h3>
<p>• 函数式语言通过模式匹配简化递归的终止条件和分支逻辑。<br>
• <strong>示例（Erlang 计算斐波那契数列）</strong>：</p>
  <figure class="highlight erlang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">fib</span><span class="params">(<span class="number">0</span>)</span> -&gt;</span> <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="title">fib</span><span class="params">(<span class="number">1</span>)</span> -&gt;</span> <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="title">fib</span><span class="params">(N)</span> -&gt;</span> fib(N-<span class="number">1</span>) + fib(N-<span class="number">2</span>).  -- 递归 + 模式匹配</span><br></pre></td></tr></table></figure>
<h3 id="4-高阶函数支持"><strong>(4) 高阶函数支持</strong></h3>
<p>• <code>map</code>、<code>fold</code>、<code>filter</code> 等高阶函数隐藏了递归细节，开发者只需关注逻辑。<br>
• <strong>示例（Haskell 用 <code>foldl</code> 求和）</strong>：</p>
  <figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">sumList</span> = foldl (+) <span class="number">0</span>  <span class="comment">-- 无需手动写递归</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="2-命令式语言为何不太适合递归？"><strong>2. 命令式语言为何不太适合递归？</strong></h2>
<h3 id="1-默认不支持尾递归优化"><strong>(1) 默认不支持尾递归优化</strong></h3>
<p>• <strong>Python、Java、C（未优化时）</strong> 的递归深度受栈大小限制，易溢出。</p>
  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">factorial</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> n * factorial(n - <span class="number">1</span>)  <span class="comment"># 非尾递归 → 栈溢出风险</span></span><br></pre></td></tr></table></figure>
<h3 id="2-可变状态（Mutable-State）"><strong>(2) 可变状态（Mutable State）</strong></h3>
<p>• 循环修改变量更直观，递归需额外传递状态（如累加器）。</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Java 的迭代更常见</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">acc</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) acc += i;</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-性能开销"><strong>(3) 性能开销</strong></h3>
<p>• 递归的函数调用成本高于循环（压栈/弹栈操作），在性能敏感场景不占优。</p>
<hr>
<h2 id="3-何时用递归？何时用迭代？"><strong>3. 何时用递归？何时用迭代？</strong></h2>
<table>
<thead>
<tr>
<th><strong>场景</strong></th>
<th><strong>推荐方式</strong></th>
<th><strong>示例语言</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>函数式编程（无副作用、TCO）</td>
<td>递归</td>
<td>Haskell、Scheme、Erlang</td>
</tr>
<tr>
<td>命令式编程（需性能、易调试）</td>
<td>迭代</td>
<td>Python、Java、C</td>
</tr>
<tr>
<td>分治算法（如快速排序）</td>
<td>递归 + 尾递归优化</td>
<td>所有语言</td>
</tr>
<tr>
<td>线性操作（如求和、遍历）</td>
<td>迭代</td>
<td>所有语言</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="4-跨语言递归示例对比"><strong>4. 跨语言递归示例对比</strong></h2>
<h3 id="1-求和（1-2-…-n）"><strong>(1) 求和（1+2+…+n）</strong></h3>
<h4 id="函数式风格（Scheme）"><strong>函数式风格（Scheme）</strong></h4>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">sum</span> n acc)</span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">=</span></span> n <span class="number">0</span>)</span><br><span class="line">      acc</span><br><span class="line">      (<span class="name">sum</span> (<span class="name"><span class="built_in">-</span></span> n <span class="number">1</span>) (<span class="name"><span class="built_in">+</span></span> acc n))))  <span class="comment">;; 尾递归优化</span></span><br></pre></td></tr></table></figure>
<h4 id="命令式风格（Python）"><strong>命令式风格（Python）</strong></h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum_iter</span>(<span class="params">n</span>):</span><br><span class="line">    acc = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        acc += n</span><br><span class="line">        n -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> acc</span><br></pre></td></tr></table></figure>
<h3 id="2-树的中序遍历"><strong>(2) 树的中序遍历</strong></h3>
<h4 id="函数式风格（Haskell）"><strong>函数式风格（Haskell）</strong></h4>
<figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Tree</span> = <span class="type">Leaf</span> | <span class="type">Node</span> <span class="type">Int</span> <span class="type">Tree</span> <span class="type">Tree</span></span></span><br><span class="line"></span><br><span class="line"><span class="title">inorder</span> <span class="type">Leaf</span> = []</span><br><span class="line"><span class="title">inorder</span> (<span class="type">Node</span> val left right) = inorder left ++ [val] ++ inorder right</span><br></pre></td></tr></table></figure>
<h4 id="命令式风格（Java）"><strong>命令式风格（Java）</strong></h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Integer&gt; <span class="title function_">inorder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (root != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">while</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(root);</span><br><span class="line">            root = root.left;</span><br><span class="line">        &#125;</span><br><span class="line">        root = stack.pop();</span><br><span class="line">        res.add(root.val);</span><br><span class="line">        root = root.right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="5-总结"><strong>5. 总结</strong></h2>
<p>• <strong>函数式语言</strong>：递归是首选，因语言设计支持（TCO、不可变数据、模式匹配）。<br>
• <strong>命令式语言</strong>：优先用迭代，递归仅用于分治等特定场景（或手动优化为尾递归）。<br>
• <strong>通用建议</strong>：<br>
• 如果语言支持 TCO（如 Scheme、JavaScript），可放心用递归。<br>
• 在 Python/Java 中，递归深度大时改用迭代或尾递归 + 累加器。<br>
• <strong>递归的本质是“分治”</strong>，迭代的本质是“状态更新”，根据场景选择。</p>
<h2 id="二级指针代替递归？">二级指针代替递归？</h2>
<p>在实际开发中，是否使用二级指针（或类似技术）取决于<strong>代码可读性、维护性、性能需求和团队规范</strong>。以下是具体分析：</p>
<hr>
<h3 id="1-二级指针的优缺点"><strong>1. 二级指针的优缺点</strong></h3>
<h4 id="优点："><strong>优点</strong>：</h4>
<p>• <strong>精确控制内存</strong>：直接操作指针的指针，适合底层系统开发（如C/C++内核、嵌入式）。<br>
• <strong>避免拷贝开销</strong>：通过指针修改数据，而非传递值（如修改链表头节点）。<br>
• <strong>模拟栈的迭代实现</strong>：在非递归算法中替代递归调用栈（如树的迭代构建）。</p>
<h4 id="缺点："><strong>缺点</strong>：</h4>
<p>• <strong>可读性差</strong>：二级指针容易让代码变得晦涩（如 <code>TreeNode** parent</code>）。<br>
• <strong>易出错</strong>：指针操作稍有不慎会导致悬空指针、内存泄漏。<br>
• <strong>语言限制</strong>：Python/Java等无显式指针的语言需用替代方案（如包装类）。</p>
<hr>
<h3 id="2-递归-vs-二级指针迭代：如何选择？"><strong>2. 递归 vs 二级指针迭代：如何选择？</strong></h3>
<table>
<thead>
<tr>
<th><strong>场景</strong></th>
<th><strong>推荐方案</strong></th>
<th><strong>理由</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>小规模数据</strong></td>
<td>递归</td>
<td>代码简洁，符合直觉（如树的遍历、分治算法）。</td>
</tr>
<tr>
<td><strong>大规模数据</strong></td>
<td>迭代（二级指针/栈模拟）</td>
<td>避免栈溢出，更可控（如处理深度超过10,000的树）。</td>
</tr>
<tr>
<td><strong>性能敏感场景</strong></td>
<td>迭代</td>
<td>递归的函数调用开销较高（但编译器优化后差异可能变小）。</td>
</tr>
<tr>
<td><strong>团队协作/维护性优先</strong></td>
<td>递归</td>
<td>递归更易读，除非明确需要避免递归（如代码规范禁止）。</td>
</tr>
<tr>
<td><strong>无尾递归优化的语言</strong></td>
<td>迭代</td>
<td>Python/Java等语言递归深度有限，需手动改迭代。</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="3-各语言下的实践建议"><strong>3. 各语言下的实践建议</strong></h3>
<h4 id="C-C-："><strong>C/C++</strong>：</h4>
<p>• <strong>优先递归</strong>：除非栈深度可能爆炸（如处理用户输入的巨型树）。<br>
• <strong>二级指针迭代示例</strong>（BST插入）：</p>
  <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(TreeNode** root, <span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (*root) &#123;</span><br><span class="line">        root = (val &lt; (*root)-&gt;val) ? &amp;(*root)-&gt;left : &amp;(*root)-&gt;right;</span><br><span class="line">    &#125;</span><br><span class="line">    *root = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Python-Java："><strong>Python/Java</strong>：</h4>
<p>• <strong>递归+索引传递</strong>：用子数组范围 <code>(left, right)</code> 替代指针。<br>
• <strong>迭代方案</strong>：用栈/队列+包装类（如Python的<code>list</code>、Java的<code>Ref&lt;T&gt;</code>）。</p>
  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Python迭代示例（无指针）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sortedArrayToBST</span>(<span class="params">nums</span>):</span><br><span class="line">    stack = [(<span class="number">0</span>, <span class="built_in">len</span>(nums)-<span class="number">1</span>, <span class="literal">None</span>, <span class="literal">True</span>)]  <span class="comment"># (left, right, parent, is_left)</span></span><br><span class="line">    root = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">while</span> stack:</span><br><span class="line">        left, right, parent, is_left = stack.pop()</span><br><span class="line">        <span class="keyword">if</span> left &gt; right: <span class="keyword">continue</span></span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        node = TreeNode(nums[mid])</span><br><span class="line">        <span class="keyword">if</span> is_left <span class="keyword">and</span> parent: parent.left = node</span><br><span class="line">        <span class="keyword">elif</span> parent: parent.right = node</span><br><span class="line">        <span class="keyword">else</span>: root = node</span><br><span class="line">        stack.append((mid+<span class="number">1</span>, right, node, <span class="literal">False</span>))</span><br><span class="line">        stack.append((left, mid-<span class="number">1</span>, node, <span class="literal">True</span>))</span><br><span class="line">    <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>
<h4 id="Go："><strong>Go</strong>：</h4>
<p>• <strong>灵活选择</strong>：Go的递归优化较好，但也可用指针的指针：</p>
  <figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(root **Node, val <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> *root != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> val &lt; (*root).val &#123;</span><br><span class="line">            root = &amp;(*root).left</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            root = &amp;(*root).right</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    *root = &amp;Node&#123;val: val&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="4-黄金准则"><strong>4. 黄金准则</strong></h3>
<ol>
<li><strong>默认用递归</strong>：除非有明确理由（如性能、栈深度、团队规范）。</li>
<li><strong>二级指针迭代的适用场景</strong>：<br>
• 需要极致性能（如高频交易系统）。<br>
• 递归深度不可控（如解析用户生成的深层JSON）。<br>
• 语言强制要求（如某些嵌入式C环境禁用递归）。</li>
<li><strong>代码可读性 &gt; 微优化</strong>：除非性能测试证明递归是瓶颈。</li>
</ol>
<hr>
<h3 id="5-经典案例参考"><strong>5. 经典案例参考</strong></h3>
<p>• <strong>Linux内核</strong>：大量使用二级指针操作链表（<code>list_head</code>）。<br>
• <strong>STL库</strong>：迭代实现优先（如<code>std::sort</code>用迭代避免递归栈溢出）。<br>
• <strong>Java/Python标准库</strong>：递归为主（如<code>Collections.sort</code>用递归TimSort）。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/avatar.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/avatar.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Exisfar</div><div class="post-copyright__author_desc">这是我的小窝，欢迎光临！</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://exisfar.github.io/2025/04/20/CS-Algorithm-recursion/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://exisfar.github.io/2025/04/20/CS-Algorithm-recursion/')">Recursion</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://exisfar.github.io/2025/04/20/CS-Algorithm-recursion/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Recursion&amp;url=https://exisfar.github.io/2025/04/20/CS-Algorithm-recursion/&amp;pic=/img/nightfall.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Algorithm/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Algorithm<span class="tagsPageCount">3</span></a><a class="post-meta__box__tags" href="/tags/Recursion/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Recursion<span class="tagsPageCount">1</span></a></div></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/04/20/CS-Algorithm-%E5%9B%BE%E8%AE%BA/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/nightfall.png" onerror="onerror=null;src='/img/nightfall.png'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">图论</div></div></a></div><div class="next-post pull-right"><a href="/2025/04/20/CS-Algorithm-dynamic-programming/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/nightfall.png" onerror="onerror=null;src='/img/nightfall.png'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Dynamic Programming</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2025/04/20/CS-Algorithm-algorithm/" title="Algorithm"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/nightfall.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-20</div><div class="title">Algorithm</div></div></a></div><div><a href="/2025/04/20/CS-Algorithm-dynamic-programming/" title="Dynamic Programming"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/nightfall.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-20</div><div class="title">Dynamic Programming</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> Comment</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="https://emotion.acs.pw/emotion/HONKAI3/16.gif" alt="status"/></div></div><div class="author-info__description">Full Stack Developer</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Exisfar</h1><div class="author-info__desc">这是我的小窝，欢迎光临！</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Exisfar" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="/cunyuanwu@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Recursion</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-recursion-is-often-slower-than-iterative-solutions"><span class="toc-number">1.1.</span> <span class="toc-text">Why recursion is often slower than iterative solutions?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Functional-programming-language"><span class="toc-number">1.2.</span> <span class="toc-text">Functional programming language</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E8%AF%AD%E8%A8%80%E6%98%AF%E5%90%A6%E6%9B%B4%E9%80%82%E5%90%88%E5%86%99%E9%80%92%E5%BD%92%EF%BC%9F"><span class="toc-number">1.2.1.</span> <span class="toc-text">函数式语言是否更适合写递归？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E5%BC%8F%E8%AF%AD%E8%A8%80%E4%B8%BA%E4%BD%95%E9%80%82%E5%90%88%E9%80%92%E5%BD%92%EF%BC%9F"><span class="toc-number">1.3.</span> <span class="toc-text">1. 函数式语言为何适合递归？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%97%A0%E5%89%AF%E4%BD%9C%E7%94%A8%EF%BC%88Immutable-Data%EF%BC%89"><span class="toc-number">1.3.1.</span> <span class="toc-text">(1) 无副作用（Immutable Data）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B0%BE%E9%80%92%E5%BD%92%E4%BC%98%E5%8C%96%EF%BC%88Tail-Call-Optimization-TCO%EF%BC%89"><span class="toc-number">1.3.2.</span> <span class="toc-text">(2) 尾递归优化（Tail Call Optimization, TCO）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%EF%BC%88Pattern-Matching%EF%BC%89"><span class="toc-number">1.3.3.</span> <span class="toc-text">(3) 模式匹配（Pattern Matching）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E6%94%AF%E6%8C%81"><span class="toc-number">1.3.4.</span> <span class="toc-text">(4) 高阶函数支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%91%BD%E4%BB%A4%E5%BC%8F%E8%AF%AD%E8%A8%80%E4%B8%BA%E4%BD%95%E4%B8%8D%E5%A4%AA%E9%80%82%E5%90%88%E9%80%92%E5%BD%92%EF%BC%9F"><span class="toc-number">1.4.</span> <span class="toc-text">2. 命令式语言为何不太适合递归？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%BB%98%E8%AE%A4%E4%B8%8D%E6%94%AF%E6%8C%81%E5%B0%BE%E9%80%92%E5%BD%92%E4%BC%98%E5%8C%96"><span class="toc-number">1.4.1.</span> <span class="toc-text">(1) 默认不支持尾递归优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%AF%E5%8F%98%E7%8A%B6%E6%80%81%EF%BC%88Mutable-State%EF%BC%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">(2) 可变状态（Mutable State）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%80%A7%E8%83%BD%E5%BC%80%E9%94%80"><span class="toc-number">1.4.3.</span> <span class="toc-text">(3) 性能开销</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BD%95%E6%97%B6%E7%94%A8%E9%80%92%E5%BD%92%EF%BC%9F%E4%BD%95%E6%97%B6%E7%94%A8%E8%BF%AD%E4%BB%A3%EF%BC%9F"><span class="toc-number">1.5.</span> <span class="toc-text">3. 何时用递归？何时用迭代？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%B7%A8%E8%AF%AD%E8%A8%80%E9%80%92%E5%BD%92%E7%A4%BA%E4%BE%8B%E5%AF%B9%E6%AF%94"><span class="toc-number">1.6.</span> <span class="toc-text">4. 跨语言递归示例对比</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B1%82%E5%92%8C%EF%BC%881-2-%E2%80%A6-n%EF%BC%89"><span class="toc-number">1.6.1.</span> <span class="toc-text">(1) 求和（1+2+…+n）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E9%A3%8E%E6%A0%BC%EF%BC%88Scheme%EF%BC%89"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">函数式风格（Scheme）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E5%BC%8F%E9%A3%8E%E6%A0%BC%EF%BC%88Python%EF%BC%89"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">命令式风格（Python）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A0%91%E7%9A%84%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86"><span class="toc-number">1.6.2.</span> <span class="toc-text">(2) 树的中序遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E9%A3%8E%E6%A0%BC%EF%BC%88Haskell%EF%BC%89"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">函数式风格（Haskell）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E5%BC%8F%E9%A3%8E%E6%A0%BC%EF%BC%88Java%EF%BC%89"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">命令式风格（Java）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%80%BB%E7%BB%93"><span class="toc-number">1.7.</span> <span class="toc-text">5. 总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E4%BB%A3%E6%9B%BF%E9%80%92%E5%BD%92%EF%BC%9F"><span class="toc-number">1.8.</span> <span class="toc-text">二级指针代替递归？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">1.8.1.</span> <span class="toc-text">1. 二级指针的优缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E7%82%B9%EF%BC%9A"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">优点：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9%EF%BC%9A"><span class="toc-number">1.8.1.2.</span> <span class="toc-text">缺点：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%92%E5%BD%92-vs-%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E8%BF%AD%E4%BB%A3%EF%BC%9A%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%EF%BC%9F"><span class="toc-number">1.8.2.</span> <span class="toc-text">2. 递归 vs 二级指针迭代：如何选择？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%84%E8%AF%AD%E8%A8%80%E4%B8%8B%E7%9A%84%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.8.3.</span> <span class="toc-text">3. 各语言下的实践建议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#C-C-%EF%BC%9A"><span class="toc-number">1.8.3.1.</span> <span class="toc-text">C&#x2F;C++：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-Java%EF%BC%9A"><span class="toc-number">1.8.3.2.</span> <span class="toc-text">Python&#x2F;Java：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Go%EF%BC%9A"><span class="toc-number">1.8.3.3.</span> <span class="toc-text">Go：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%BB%84%E9%87%91%E5%87%86%E5%88%99"><span class="toc-number">1.8.4.</span> <span class="toc-text">4. 黄金准则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B%E5%8F%82%E8%80%83"><span class="toc-number">1.8.5.</span> <span class="toc-text">5. 经典案例参考</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/29/CS-Development-%E5%90%8C%E6%AD%A5vs%E5%BC%82%E6%AD%A5/" title="同步 vs 异步：核心区别、适用场景与实现技术">同步 vs 异步：核心区别、适用场景与实现技术</a><time datetime="2025-04-29T13:35:00.000Z" title="Created 2025-04-29 21:35:00">2025-04-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/29/CS-PL-JS-asynchronous-programming/" title="Javascript: Asynchronous Programming">Javascript: Asynchronous Programming</a><time datetime="2025-04-28T17:38:00.000Z" title="Created 2025-04-29 01:38:00">2025-04-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/27/CS-Development-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91/" title="业务逻辑 (Buisness Logic)">业务逻辑 (Buisness Logic)</a><time datetime="2025-04-27T06:50:00.000Z" title="Created 2025-04-27 14:50:00">2025-04-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/26/CS-OS-%E9%9D%A2%E8%AF%95/" title="OS: 面试">OS: 面试</a><time datetime="2025-04-26T04:51:00.000Z" title="Created 2025-04-26 12:51:00">2025-04-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/26/CS-Graphics-texture/" title="Graphics: Texture">Graphics: Texture</a><time datetime="2025-04-26T03:39:00.000Z" title="Created 2025-04-26 11:39:00">2025-04-26</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Exisfar" target="_blank">Exisfar</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">82</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">52</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">26</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://exisfar.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="https://exisfar.github.io/" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/nightfall.png&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友链</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Algorithm/" style="font-size: 0.88rem;">Algorithm<sup>3</sup></a><a href="/tags/CS/" style="font-size: 0.88rem;">CS<sup>1</sup></a><a href="/tags/CUDA/" style="font-size: 0.88rem;">CUDA<sup>1</sup></a><a href="/tags/Compiler/" style="font-size: 0.88rem;">Compiler<sup>2</sup></a><a href="/tags/Database/" style="font-size: 0.88rem;">Database<sup>1</sup></a><a href="/tags/Development/" style="font-size: 0.88rem;">Development<sup>5</sup></a><a href="/tags/Dynamic-Programming/" style="font-size: 0.88rem;">Dynamic Programming<sup>1</sup></a><a href="/tags/English/" style="font-size: 0.88rem;">English<sup>1</sup></a><a href="/tags/Graphics/" style="font-size: 0.88rem;">Graphics<sup>2</sup></a><a href="/tags/HPC/" style="font-size: 0.88rem;">HPC<sup>1</sup></a><a href="/tags/Lexical-Analysis/" style="font-size: 0.88rem;">Lexical Analysis<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/ML/" style="font-size: 0.88rem;">ML<sup>2</sup></a><a href="/tags/Math/" style="font-size: 0.88rem;">Math<sup>3</sup></a><a href="/tags/Network/" style="font-size: 0.88rem;">Network<sup>1</sup></a><a href="/tags/OS/" style="font-size: 0.88rem;">OS<sup>3</sup></a><a href="/tags/OpenGL/" style="font-size: 0.88rem;">OpenGL<sup>1</sup></a><a href="/tags/Progarmming-Model/" style="font-size: 0.88rem;">Progarmming Model<sup>1</sup></a><a href="/tags/Recursion/" style="font-size: 0.88rem;">Recursion<sup>1</sup></a><a href="/tags/Texture/" style="font-size: 0.88rem;">Texture<sup>1</sup></a><a href="/tags/gcc/" style="font-size: 0.88rem;">gcc<sup>1</sup></a><a href="/tags/normalization/" style="font-size: 0.88rem;">normalization<sup>1</sup></a><a href="/tags/regularization/" style="font-size: 0.88rem;">regularization<sup>1</sup></a><a href="/tags/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91/" style="font-size: 0.88rem;">业务逻辑<sup>1</sup></a><a href="/tags/%E4%B9%90%E7%90%86/" style="font-size: 0.88rem;">乐理<sup>1</sup></a><a href="/tags/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">体系结构<sup>1</sup></a><a href="/tags/%E5%81%A5%E8%BA%AB/" style="font-size: 0.88rem;">健身<sup>1</sup></a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 0.88rem;">加密<sup>7</sup></a><a href="/tags/%E5%90%8C%E6%AD%A5/" style="font-size: 0.88rem;">同步<sup>1</sup></a><a href="/tags/%E5%9B%BE%E8%A1%A8/" style="font-size: 0.88rem;">图表<sup>1</sup></a><a href="/tags/%E5%BC%82%E6%AD%A5/" style="font-size: 0.88rem;">异步<sup>2</sup></a><a href="/tags/%E5%BE%AE%E5%88%86/" style="font-size: 0.88rem;">微分<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%A0%88/" style="font-size: 0.88rem;">技术栈<sup>1</sup></a><a href="/tags/%E6%8A%BD%E8%B1%A1%E8%83%BD%E5%8A%9B/" style="font-size: 0.88rem;">抽象能力<sup>1</sup></a><a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 0.88rem;">生活<sup>3</sup></a><a href="/tags/%E8%A1%A3%E7%89%A9%E5%88%86%E7%B1%BB/" style="font-size: 0.88rem;">衣物分类<sup>1</sup></a><a href="/tags/%E8%A1%A8%E8%BE%BE/" style="font-size: 0.88rem;">表达<sup>1</sup></a><a href="/tags/%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE/" style="font-size: 0.88rem;">逻辑表达<sup>1</sup></a><a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 0.88rem;">音乐<sup>1</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE%E7%BB%84%E7%BB%87/" style="font-size: 0.88rem;">项目组织<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="9433227449" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/9433227449&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Exisfar 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(()=>{
  const getGiscusTheme = theme => {
    return theme === 'dark' ? 'dark' : 'light'
  }

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.app/client.js',
      'data-repo': 'Exisfar/Exisfar.github.io',
      'data-repo-id': 'R_kgDOOPtzpw',
      'data-category-id': 'DIC_kwDOOPtzp84CpOlz',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },{"data-lang":"zh-CN","data-mapping":"pathname","data-category":"Announcements","data-input-position":"bottom"})

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const sendMessage = message => {
      const iframe = document.querySelector('iframe.giscus-frame')
      if (!iframe) return
      iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app')
    }

    sendMessage({
      setConfig: {
        theme: getGiscusTheme(theme)
      }
    });
  }

  anzhiyu.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Giscus' === 'Giscus' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>